<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - PDF Ingredient Format</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .test-section h2 {
            margin-top: 0;
            color: #333;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .test-pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .test-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Test - Formato de Ingredientes en PDF</h1>
    
    <div class="test-section">
        <h2>Receta de Prueba</h2>
        <p>Esta receta contiene ingredientes con diferentes combinaciones de cantidad y unidad:</p>
        
        <div class="test-info">
            <strong>Ingredientes de prueba:</strong>
            <ol>
                <li>Arroz - 500 g (cantidad + unidad)</li>
                <li>Sal - - (sin cantidad ni unidad)</li>
                <li>Aceite - al gusto (solo unidad)</li>
                <li>Huevos - 3 (solo cantidad)</li>
                <li>AzÃºcar - g (cantidad 0 con unidad)</li>
            </ol>
        </div>
        
        <button onclick="generateTestPDF()">ðŸ“„ Generar PDF de Prueba</button>
        
        <div id="test-results" style="margin-top: 20px;"></div>
    </div>
    
    <script src="models.js"></script>
    <script>
        async function generateTestPDF() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="test-info">Generando PDF...</div>';
            
            try {
                // Create test recipe with various ingredient formats
                const testRecipe = new Recipe({
                    name: 'Receta de Prueba - Formato de Ingredientes',
                    category: 'carne',
                    totalTime: '1h 30min',
                    ingredients: [
                        new Ingredient({
                            name: 'Arroz',
                            quantity: 500,
                            unit: 'g',
                            order: 0
                        }),
                        new Ingredient({
                            name: 'Sal',
                            quantity: 0,
                            unit: '',
                            order: 1
                        }),
                        new Ingredient({
                            name: 'Aceite',
                            quantity: 0,
                            unit: 'al gusto',
                            order: 2
                        }),
                        new Ingredient({
                            name: 'Huevos',
                            quantity: 3,
                            unit: '',
                            order: 3
                        }),
                        new Ingredient({
                            name: 'AzÃºcar',
                            quantity: 0,
                            unit: 'g',
                            order: 4
                        })
                    ],
                    preparationMethod: 'Esta es una receta de prueba para verificar que los ingredientes se formatean correctamente en el PDF. Los ingredientes deben mostrarse sin el "0" cuando la cantidad estÃ¡ vacÃ­a, y con un guiÃ³n "-" cuando no hay ni cantidad ni unidad.',
                    author: 'Sistema de Pruebas',
                    history: 'Esta receta fue creada automÃ¡ticamente para probar el formato de ingredientes en la exportaciÃ³n a PDF.'
                });
                
                // Generate PDF
                const doc = await PDFExporter.generatePDF(testRecipe);
                
                // Download PDF
                doc.save('test-ingredientes-formato.pdf');
                
                resultsDiv.innerHTML = `
                    <div class="test-pass">
                        âœ“ PDF generado exitosamente
                        <br><br>
                        <strong>Verifica en el PDF que:</strong>
                        <ul>
                            <li>Arroz muestra: "500 g"</li>
                            <li>Sal muestra: "-"</li>
                            <li>Aceite muestra: "al gusto"</li>
                            <li>Huevos muestra: "3"</li>
                            <li>AzÃºcar muestra: "g"</li>
                        </ul>
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="test-result" style="background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;">
                        âœ— Error al generar PDF: ${error.message}
                    </div>
                `;
                console.error('Error:', error);
            }
        }
    </script>
</body>
</html>
