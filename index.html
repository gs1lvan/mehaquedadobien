<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mehaquedadobien 🍳</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="mehaquedadobien">
</head>

<body>
    <div class="container">
        <!-- Header with title and new recipe button -->
        <header class="recipe-header">
            <div class="header-content">
                <h1><a href="#" id="home-link" style="text-decoration: none; color: inherit;">🍳 mehaquedadobien</a></h1>
                
                <!-- Mobile menu button -->
                <button id="mobile-menu-btn" class="mobile-menu-btn" title="Menú">
                    <span class="hamburger-icon">☰</span>
                </button>
                
                <!-- Desktop actions -->
                <div class="header-actions" id="header-actions">
                    <button id="theme-toggle-btn" class="btn-action" title="Cambiar tema">
                        🌙 Tema
                    </button>
                    <button id="manage-categories-btn" class="btn-action" title="Gestionar categorías">
                        🏷️ Categorías
                    </button>
                    <button id="import-xml-btn" class="btn-action" title="Importar recetas desde XML">
                        📥 Importar receta
                    </button>
                    <button id="export-all-btn" class="btn-action" title="Exportar todas las recetas">
                        📤 Exportar todas las recetas
                    </button>
                    <button id="new-recipe-btn" class="btn-primary">
                        ➕ Nueva Receta
                    </button>
                </div>
                
                <!-- Mobile dropdown menu -->
                <div id="mobile-menu" class="mobile-menu">
                    <button id="mobile-theme-toggle" class="mobile-menu-item">
                        🌙 Tema
                    </button>
                    <button id="mobile-manage-categories" class="mobile-menu-item">
                        🏷️ Categorías
                    </button>
                    <button id="mobile-import-xml" class="mobile-menu-item">
                        📥 Importar receta
                    </button>
                    <button id="mobile-export-all" class="mobile-menu-item">
                        📤 Exportar todas las recetas
                    </button>
                    <button id="mobile-new-recipe" class="mobile-menu-item mobile-menu-item-primary">
                        ➕ Nueva Receta
                    </button>
                </div>
                
                <!-- Hidden file input for XML import -->
                <input type="file" id="xml-file-input" accept=".xml" style="display: none;">
            </div>
        </header>

        <main>
            <!-- Filter bar with category chips -->
            <section id="filter-bar" class="filter-bar">
                <h2 class="filter-title">Filtrar por categoría:</h2>
                <div class="filter-chips">
                    <button class="filter-chip" data-category="all">
                        Todas
                    </button>
                    <button class="filter-chip" data-category="carne">
                        🥩 Carne
                    </button>
                    <button class="filter-chip" data-category="verdura">
                        🥬 Verdura
                    </button>
                    <button class="filter-chip" data-category="pescado">
                        🐟 Pescado
                    </button>
                    <button class="filter-chip" data-category="fruta">
                        🍎 Fruta
                    </button>
                    <button class="filter-chip" data-category="cereales">
                        🌾 Cereales
                    </button>
                    <button class="filter-chip" data-category="con-huevo">
                        🥚 Con huevo
                    </button>
                    <button class="filter-chip" data-category="pollo">
                        🐔 Pollo
                    </button>
                    <button class="filter-chip" data-category="escabeche">
                        🥒 Escabeche
                    </button>
                </div>
            </section>

            <!-- Recipe grid -->
            <section id="recipe-list-view" class="recipe-list">
                <div id="recipes-grid" class="recipes-grid">
                    <!-- Recipe cards will be dynamically inserted here -->
                    <!-- Example structure:
                    <div class="recipe-card" data-recipe-id="uuid">
                        <div class="recipe-image">
                            <img src="..." alt="Recipe name">
                        </div>
                        <div class="recipe-content">
                            <h3 class="recipe-name">Recipe Name</h3>
                            <span class="recipe-category">Category</span>
                            <p class="recipe-preview">Ingredients preview...</p>
                        </div>
                    </div>
                    -->
                </div>
                
                <!-- Empty state -->
                <div id="empty-state" class="empty-state hidden">
                    <div class="empty-state-icon">📖</div>
                    <h3>No hay recetas todavía</h3>
                    <p>Comienza creando tu primera receta</p>
                    <button class="btn-primary" onclick="document.getElementById('new-recipe-btn').click()">
                        ➕ Crear Primera Receta
                    </button>
                </div>
            </section>

            <!-- Recipe Detail View -->
            <section id="recipe-detail-view" class="recipe-detail hidden">
                <div class="detail-header">
                    <button id="back-to-list-btn" class="btn-icon" title="Volver a la lista">◀</button>
                    <div class="detail-header-content">
                        <div style="display: flex; align-items: center; gap: var(--spacing-sm); flex-wrap: wrap; margin-bottom: var(--spacing-sm);">
                            <h2 id="detail-recipe-name">Nombre de la Receta</h2>
                            <span id="detail-total-time" class="recipe-total-time" style="display: none;"></span>
                        </div>
                        <div class="detail-actions">
                            <button id="edit-recipe-btn" class="btn-action btn-action-compact" title="Editar">Editar</button>
                            <button id="duplicate-recipe-btn" class="btn-action btn-action-compact" title="Duplicar">Duplicar</button>
                            <button id="delete-recipe-btn" class="btn-action btn-action-compact btn-danger" title="Eliminar">Eliminar</button>
                            <button id="export-xml-btn" class="btn-action btn-action-compact" title="Exportar esta receta">Exportar XML</button>
                            <button id="export-pdf-btn" class="btn-action btn-action-compact" title="Exportar PDF">PDF</button>
                        </div>
                    </div>
                </div>

                <div class="detail-content">
                    <!-- Category Badge (hidden) -->
                    <div class="detail-category-section" style="display: none;">
                        <span id="detail-category" class="recipe-category">Sin categoría</span>
                    </div>

                    <!-- Multimedia Gallery -->
                    <div id="detail-multimedia-section" class="detail-section" style="display: none;">
                        <div id="detail-images-gallery" class="detail-gallery"></div>
                        <div id="detail-videos-gallery" class="detail-gallery"></div>
                    </div>

                    <!-- Preparation Method -->
                    <div class="detail-section">
                        <h3 class="detail-section-title">👨‍🍳 Método de Preparación</h3>
                        <div id="detail-preparation-method" class="detail-preparation-method">
                            <!-- Preparation method will be added here -->
                        </div>
                        <div id="detail-no-method" class="detail-empty" style="display: none;">
                            <p>No hay método de preparación definido</p>
                        </div>
                    </div>

                    <!-- Ingredients -->
                    <div class="detail-section">
                        <h3 class="detail-section-title">🥘 Ingredientes</h3>
                        <ul id="detail-ingredients-list" class="detail-ingredients-list">
                            <!-- Ingredients will be dynamically added here -->
                        </ul>
                        <div id="detail-no-ingredients" class="detail-empty" style="display: none;">
                            <p>No hay ingredientes definidos</p>
                        </div>
                    </div>

                    <!-- Addition Sequences -->
                    <div id="detail-sequences-section" class="detail-section" style="display: none;">
                        <h3 class="detail-section-title">🔢 Secuencias de Adición</h3>
                        <div id="detail-sequences-list" class="detail-sequences-list">
                            <!-- Sequences will be dynamically added here -->
                        </div>
                    </div>

                    <!-- Metadata -->
                    <div class="detail-section detail-metadata">
                        <h3 class="detail-section-title">ℹ️ Información</h3>
                        
                        <!-- Additional Information (Author and History) -->
                        <div id="detail-additional-info-section" style="display: none; margin-bottom: 24px;">
                            <div id="detail-author-section" style="display: none; margin-bottom: 16px;">
                                <span class="metadata-label">Autor:</span>
                                <div id="detail-author" class="metadata-value"></div>
                            </div>
                            <div id="detail-history-section" style="display: none;">
                                <span class="metadata-label">Historia:</span>
                                <div id="detail-history" class="metadata-value" style="white-space: pre-wrap;"></div>
                            </div>
                        </div>

                        <div class="metadata-grid">
                            <div class="metadata-item">
                                <span class="metadata-label">Creada:</span>
                                <span id="detail-created-at" class="metadata-value">-</span>
                            </div>
                            <div class="metadata-item">
                                <span class="metadata-label">Última modificación:</span>
                                <span id="detail-updated-at" class="metadata-value">-</span>
                            </div>
                            <div class="metadata-item">
                                <span class="metadata-label">ID:</span>
                                <span id="detail-recipe-id" class="metadata-value">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recipe Form (Create/Edit) -->
            <section id="recipe-form-view" class="recipe-form hidden">
                <div class="form-header">
                    <h2 id="form-title">Nueva Receta</h2>
                    <button id="close-form-btn" class="btn-icon" title="Cerrar">✕</button>
                </div>

                <form id="recipe-form" class="recipe-form-content">
                    <!-- Basic Information Section -->
                    <div class="form-section">
                        <h3 class="section-title">Información Básica</h3>
                        
                        <div class="form-group">
                            <label for="recipe-name" class="required">Nombre de la receta</label>
                            <input 
                                type="text" 
                                id="recipe-name" 
                                name="name" 
                                class="form-input" 
                                placeholder="Ej: Paella Valenciana"
                                required
                                maxlength="100"
                                autocomplete="off"
                            >
                            <span class="error-message" id="name-error"></span>
                        </div>

                        <div class="form-group">
                            <label for="recipe-category">Categoría</label>
                            <select id="recipe-category" name="category" class="form-select">
                                <option value="">Sin categoría</option>
                                <option value="carne">🥩 Carne</option>
                                <option value="verdura">🥬 Verdura</option>
                                <option value="pescado">🐟 Pescado</option>
                                <option value="fruta">🍎 Fruta</option>
                                <option value="cereales">🌾 Cereales</option>
                                <option value="mix">🍲 Mix</option>
                                <option value="con-huevo">🥚 Con huevo</option>
                                <option value="pollo">🐔 Pollo</option>
                                <option value="escabeche">🥒 Escabeche</option>
                                <option value="hospital">🏥 Hospital</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Tiempo Total (opcional)</label>
                            <div class="time-input-group">
                                <div class="time-input-item">
                                    <span class="time-label">Horas</span>
                                    <input 
                                        type="number" 
                                        id="recipe-hours" 
                                        class="form-input time-input" 
                                        placeholder="0"
                                        min="0"
                                        max="24"
                                        autocomplete="off"
                                    >
                                </div>
                                <div class="time-input-item">
                                    <span class="time-label">Minutos</span>
                                    <input 
                                        type="number" 
                                        id="recipe-minutes" 
                                        class="form-input time-input" 
                                        placeholder="0"
                                        min="0"
                                        max="60"
                                        autocomplete="off"
                                    >
                                </div>
                            </div>
                            <span class="helper-text">Tiempo aproximado para preparar la receta completa</span>
                        </div>
                    </div>

                    <!-- Preparation Method Section -->
                    <div class="form-section">
                        <h3 class="section-title">Método de Preparación</h3>
                        
                        <div class="form-group">
                            <label for="preparation-method">Instrucciones</label>
                            <textarea 
                                id="preparation-method" 
                                name="preparationMethod" 
                                class="form-textarea"
                                placeholder="Describe los pasos para preparar esta receta..."
                                rows="4"
                                autocomplete="off"
                            ></textarea>
                            <span class="helper-text">Escribe las instrucciones detalladas para preparar tu receta</span>
                        </div>
                    </div>

                    <!-- Additional Information Section -->
                    <div class="form-section">
                        <h3 class="section-title">Información de Interés</h3>
                        
                        <div class="form-group">
                            <label for="recipe-author">Autor</label>
                            <input 
                                type="text" 
                                id="recipe-author" 
                                name="author" 
                                class="form-input" 
                                placeholder="Ej: Abuela María"
                                maxlength="100"
                                autocomplete="name"
                            >
                            <span class="helper-text">Nombre de quien creó o compartió esta receta (opcional)</span>
                        </div>

                        <div class="form-group">
                            <label for="recipe-history">Historia</label>
                            <textarea 
                                id="recipe-history" 
                                name="history" 
                                class="form-textarea"
                                placeholder="Cuenta la historia detrás de esta receta..."
                                rows="3"
                                autocomplete="off"
                            ></textarea>
                            <span class="helper-text">Comparte el origen, anécdotas o recuerdos relacionados con esta receta (opcional)</span>
                        </div>
                    </div>

                    <!-- Ingredients Section -->
                    <div class="form-section">
                        <h3 class="section-title">Ingredientes</h3>
                        <div id="ingredients-container">
                            <!-- Add ingredient form -->
                            <div class="ingredient-add-form">
                                <div class="ingredient-inputs">
                                    <div class="ingredient-input-group">
                                        <label for="ingredient-name">Nombre</label>
                                        <input 
                                            type="text" 
                                            id="ingredient-name" 
                                            class="form-input ingredient-input" 
                                            placeholder="Ej: Pollo"
                                            autocomplete="off"
                                        >
                                    </div>
                                    <div class="ingredient-input-group">
                                        <label for="ingredient-quantity">Cantidad (opcional)</label>
                                        <input 
                                            type="number" 
                                            id="ingredient-quantity" 
                                            class="form-input ingredient-input" 
                                            placeholder="500"
                                            min="0"
                                            step="0.01"
                                            autocomplete="off"
                                        >
                                    </div>
                                    <div class="ingredient-input-group">
                                        <label for="ingredient-unit">Unidad</label>
                                        <select id="ingredient-unit" class="form-select ingredient-input">
                                            <option value="">Seleccionar</option>
                                            <option value="g">g (gramos)</option>
                                            <option value="kg">kg (kilogramos)</option>
                                            <option value="ml">ml (mililitros)</option>
                                            <option value="l">l (litros)</option>
                                            <option value="taza">taza</option>
                                            <option value="cucharada">cucharada</option>
                                            <option value="cucharadita">cucharadita</option>
                                            <option value="pizca">pizca</option>
                                            <option value="unidad">unidad</option>
                                            <option value="al gusto">al gusto</option>
                                        </select>
                                    </div>
                                </div>
                                <button type="button" id="add-ingredient-btn" class="btn-add-ingredient">
                                    ➕ Añadir Ingrediente
                                </button>
                                <span class="error-message" id="ingredient-error"></span>
                            </div>

                            <!-- Ingredients list -->
                            <div id="ingredients-list" class="ingredients-list">
                                <!-- Ingredients will be dynamically added here -->
                            </div>
                            
                            <div id="ingredients-empty" class="ingredients-empty">
                                <p>No hay ingredientes añadidos. Añade el primer ingrediente usando el formulario de arriba.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Addition Sequences Section -->
                    <div class="form-section">
                        <h3 class="section-title">Secuencias de Adición</h3>
                        <p class="helper-text" style="margin-bottom: var(--spacing-md);">Define el orden en que se deben añadir los ingredientes durante la preparación</p>
                        <div id="sequences-container">
                            <!-- Add sequence form -->
                            <div class="sequence-add-form">
                                <div class="sequence-form-content">
                                    <div class="sequence-input-group">
                                        <label>Ingredientes</label>
                                        <div id="sequence-ingredients-chips" class="sequence-ingredients-chips">
                                            <!-- Ingredient chips will be populated dynamically -->
                                        </div>
                                        <span class="helper-text">Selecciona uno o más ingredientes</span>
                                    </div>
                                    <div class="sequence-input-group">
                                        <label for="sequence-description">Descripción</label>
                                        <textarea 
                                            id="sequence-description" 
                                            class="form-textarea sequence-input" 
                                            placeholder="Ej: Añadir al sofrito y cocinar"
                                            rows="4"
                                            autocomplete="off"
                                        ></textarea>
                                    </div>
                                    <div class="sequence-input-group">
                                        <label>Duración (opcional)</label>
                                        <div class="time-input-group">
                                            <div class="time-input-item">
                                                <span class="time-label">Horas</span>
                                                <input 
                                                    type="number" 
                                                    id="sequence-hours" 
                                                    class="form-input time-input" 
                                                    placeholder="0"
                                                    min="0"
                                                    max="24"
                                                    autocomplete="off"
                                                >
                                            </div>
                                            <div class="time-input-item">
                                                <span class="time-label">Minutos</span>
                                                <input 
                                                    type="number" 
                                                    id="sequence-minutes" 
                                                    class="form-input time-input" 
                                                    placeholder="0"
                                                    min="0"
                                                    max="60"
                                                    autocomplete="off"
                                                >
                                            </div>
                                        </div>
                                        <span class="helper-text">Tiempo estimado para esta secuencia</span>
                                    </div>
                                </div>
                                <button type="button" id="add-sequence-btn" class="btn-add-sequence">
                                    ➕ Añadir Secuencia
                                </button>
                                <span class="error-message" id="sequence-error"></span>
                            </div>

                            <!-- Sequences list -->
                            <div id="sequences-list" class="sequences-list">
                                <!-- Sequences will be dynamically added here -->
                            </div>
                            
                            <div id="sequences-empty" class="sequences-empty">
                                <p>No hay secuencias definidas. Las secuencias son opcionales pero ayudan a especificar el orden de adición de ingredientes.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Multimedia Section -->
                    <div class="form-section">
                        <h3 class="section-title">Multimedia</h3>
                        <div id="multimedia-container">
                            <!-- Images Section -->
                            <div class="media-subsection">
                                <h4 class="subsection-title">Imágenes</h4>
                                <div class="media-upload-area">
                                    <input 
                                        type="file" 
                                        id="image-upload" 
                                        accept="image/*" 
                                        multiple
                                        style="display: none;"
                                    >
                                    <button type="button" id="upload-image-btn" class="btn-upload-media">
                                        📷 Añadir Imágenes
                                    </button>
                                    <span class="helper-text">Formatos: JPEG, PNG, WebP. Máximo 10MB por imagen</span>
                                    <span class="error-message" id="image-error"></span>
                                </div>
                                
                                <!-- Images preview grid -->
                                <div id="images-preview" class="media-preview-grid">
                                    <!-- Image previews will be dynamically added here -->
                                </div>
                                
                                <div id="images-empty" class="media-empty">
                                    <p>No hay imágenes añadidas</p>
                                </div>
                            </div>
                            
                            <!-- Videos Section -->
                            <div class="media-subsection">
                                <h4 class="subsection-title">Videos</h4>
                                <div class="media-upload-area">
                                    <input 
                                        type="file" 
                                        id="video-upload" 
                                        accept="video/*" 
                                        multiple
                                        style="display: none;"
                                    >
                                    <button type="button" id="upload-video-btn" class="btn-upload-media">
                                        🎥 Añadir Videos
                                    </button>
                                    <span class="helper-text">Formatos: MP4, WebM. Máximo 50MB por video</span>
                                    <span class="error-message" id="video-error"></span>
                                </div>
                                
                                <!-- Videos preview grid -->
                                <div id="videos-preview" class="media-preview-grid">
                                    <!-- Video previews will be dynamically added here -->
                                </div>
                                
                                <div id="videos-empty" class="media-empty">
                                    <p>No hay videos añadidos</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="button" id="cancel-form-btn" class="btn-secondary">
                            Cancelar
                        </button>
                        <button type="submit" id="save-recipe-btn" class="btn-primary">
                            💾 Guardar Receta
                        </button>
                    </div>
                </form>
            </section>


        </main>
    </div>

    <!-- Category Management Modal -->
    <div id="category-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content category-modal-content">
            <div class="modal-header">
                <h2>Gestionar Categorías</h2>
                <button id="close-category-modal" class="btn-icon">✕</button>
            </div>
            
            <div class="modal-body">
                <!-- Create new category form -->
                <div class="category-create-section">
                    <h3>Crear Nueva Categoría</h3>
                    <div class="category-form">
                        <div class="form-group">
                            <label for="new-category-name">Nombre</label>
                            <input type="text" id="new-category-name" 
                                   class="form-input"
                                   placeholder="Nombre de la categoría" 
                                   maxlength="30">
                        </div>
                        
                        <div class="form-group">
                            <label for="new-category-emoji">Emoji (opcional)</label>
                            <input type="text" id="new-category-emoji" 
                                   class="form-input"
                                   placeholder="🐱" 
                                   maxlength="2"
                                   readonly>
                            <div class="emoji-picker">
                                <div class="emoji-category">
                                    <span class="emoji-category-label">🍕 Comida</span>
                                    <div class="emoji-grid" data-category="food">
                                        <!-- Emojis will be added here -->
                                    </div>
                                </div>
                                <div class="emoji-category">
                                    <span class="emoji-category-label">🐾 Animales</span>
                                    <div class="emoji-grid" data-category="animals">
                                        <!-- Emojis will be added here -->
                                    </div>
                                </div>
                                <div class="emoji-category">
                                    <span class="emoji-category-label">🌿 Naturaleza</span>
                                    <div class="emoji-grid" data-category="nature">
                                        <!-- Emojis will be added here -->
                                    </div>
                                </div>
                                <div class="emoji-category">
                                    <span class="emoji-category-label">⚽ Deportes</span>
                                    <div class="emoji-grid" data-category="sports">
                                        <!-- Emojis will be added here -->
                                    </div>
                                </div>
                                <div class="emoji-category">
                                    <span class="emoji-category-label">🎭 Objetos</span>
                                    <div class="emoji-grid" data-category="objects">
                                        <!-- Emojis will be added here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Color</label>
                            <div id="color-palette" class="color-palette">
                                <!-- Color chips generated dynamically -->
                            </div>
                            <input type="hidden" id="selected-color">
                        </div>
                        
                        <button id="create-category-btn" class="btn-primary">
                            ➕ Crear Categoría
                        </button>
                        <span class="error-message" id="category-error"></span>
                    </div>
                </div>
                
                <!-- Categories list -->
                <div class="categories-list-section">
                    <h3>Categorías Predefinidas</h3>
                    <div id="predefined-categories-list" class="categories-list">
                        <!-- Predefined categories -->
                    </div>
                    
                    <h3>Categorías Personalizadas</h3>
                    <div id="custom-categories-list" class="categories-list">
                        <!-- Custom categories -->
                    </div>
                    <div id="custom-categories-empty" class="categories-empty">
                        <p>No hay categorías personalizadas. Crea una arriba para empezar.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Category Modal -->
    <div id="edit-category-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content edit-category-modal-content">
            <div class="modal-header">
                <h2>Editar Categoría</h2>
                <button id="close-edit-category-modal" class="btn-icon">✕</button>
            </div>
            
            <div class="modal-body">
                <div class="category-form">
                    <div class="form-group">
                        <label for="edit-category-name">Nombre</label>
                        <input type="text" id="edit-category-name" 
                               class="form-input"
                               placeholder="Nombre de la categoría" 
                               maxlength="30">
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-category-emoji">Emoji (opcional)</label>
                        <input type="text" id="edit-category-emoji" 
                               class="form-input"
                               placeholder="🐱" 
                               maxlength="2"
                               readonly>
                        <div class="emoji-picker">
                            <div class="emoji-category">
                                <span class="emoji-category-label">🍕 Comida</span>
                                <div class="emoji-grid" data-category="food">
                                    <!-- Emojis will be added here -->
                                </div>
                            </div>
                            <div class="emoji-category">
                                <span class="emoji-category-label">🐾 Animales</span>
                                <div class="emoji-grid" data-category="animals">
                                    <!-- Emojis will be added here -->
                                </div>
                            </div>
                            <div class="emoji-category">
                                <span class="emoji-category-label">🌿 Naturaleza</span>
                                <div class="emoji-grid" data-category="nature">
                                    <!-- Emojis will be added here -->
                                </div>
                            </div>
                            <div class="emoji-category">
                                <span class="emoji-category-label">⚽ Deportes</span>
                                <div class="emoji-grid" data-category="sports">
                                    <!-- Emojis will be added here -->
                                </div>
                            </div>
                            <div class="emoji-category">
                                <span class="emoji-category-label">🎭 Objetos</span>
                                <div class="emoji-grid" data-category="objects">
                                    <!-- Emojis will be added here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Color</label>
                        <div id="edit-color-palette" class="color-palette">
                            <!-- Color chips generated dynamically -->
                        </div>
                        <input type="hidden" id="edit-selected-color">
                        <input type="hidden" id="edit-category-id">
                    </div>
                    
                    <div class="modal-actions">
                        <button id="cancel-edit-category-btn" class="btn-secondary">
                            Cancelar
                        </button>
                        <button id="save-edit-category-btn" class="btn-primary">
                            💾 Guardar Cambios
                        </button>
                    </div>
                    <span class="error-message" id="edit-category-error"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="image-modal" class="image-modal hidden">
        <div class="image-modal-overlay"></div>
        <div class="image-modal-content">
            <button id="close-modal-btn" class="image-modal-close" title="Cerrar">✕</button>
            <button id="prev-image-btn" class="image-modal-nav image-modal-prev" title="Anterior">‹</button>
            <button id="next-image-btn" class="image-modal-nav image-modal-next" title="Siguiente">›</button>
            <img id="modal-image" class="image-modal-img" src="" alt="">
            <div id="modal-image-counter" class="image-modal-counter"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="models.js"></script>
    <script src="script.js"></script>
</body>

</html>
