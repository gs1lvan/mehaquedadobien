<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: Secci√≥n Colapsable de Secuencias</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #FF385C;
            border-bottom: 3px solid #FF385C;
            padding-bottom: 10px;
        }
        h2 {
            color: #222;
            margin-top: 30px;
            padding: 10px;
            background: #f7f7f7;
            border-left: 4px solid #FF385C;
        }
        .test-case {
            background: #f9f9f9;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #4ECDC4;
        }
        .test-case h3 {
            margin-top: 0;
            color: #222;
        }
        .expected {
            background: #e8f5e9;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps {
            background: #fff3e0;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .steps ol {
            margin: 5px 0;
            padding-left: 20px;
        }
        .note {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }
        .success {
            color: #2e7d32;
            font-weight: bold;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }
        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #4CAF50;
            font-weight: bold;
        }
        .visual-demo {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .demo-title {
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            padding: 10px;
            background: white;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .demo-title:hover {
            background: #FF385C;
            color: white;
        }
        .demo-icon {
            transition: transform 0.3s ease;
        }
        .demo-title.collapsed .demo-icon {
            transform: rotate(-90deg);
        }
        .demo-content {
            max-height: 500px;
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            opacity: 1;
            margin-top: 10px;
            padding: 15px;
            background: white;
            border-radius: 4px;
        }
        .demo-content.collapsed {
            max-height: 0;
            opacity: 0;
            margin-top: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìÇ Test: Secciones Colapsables del Formulario</h1>
        
        <div class="note">
            <strong>üìã Objetivo:</strong> Las secciones "Ingredientes", "Secuencias de Adici√≥n" e "Informaci√≥n de Inter√©s" 
            deben estar plegadas al editar una receta existente y desplegadas al crear una receta nueva.
        </div>

        <h2>‚ú® Funcionalidad Implementada</h2>
        <ul class="feature-list">
            <li><strong>Tres secciones colapsables:</strong> Ingredientes, Secuencias de Adici√≥n, Informaci√≥n de Inter√©s</li>
            <li><strong>Crear receta nueva:</strong> Todas las secciones desplegadas por defecto</li>
            <li><strong>Editar receta existente:</strong> Todas las secciones plegadas por defecto</li>
            <li><strong>Click en t√≠tulo:</strong> Alterna entre plegado/desplegado</li>
            <li><strong>Icono visual:</strong> Flecha que rota seg√∫n el estado (‚ñº desplegado, ‚ñ∂ plegado)</li>
            <li><strong>Animaci√≥n suave:</strong> Transici√≥n de 0.3s para colapsar/expandir</li>
        </ul>

        <h2>üé® Demo Visual Interactiva</h2>
        <div class="visual-demo">
            <div class="demo-title" onclick="toggleDemo()">
                <span class="demo-icon">‚ñº</span>
                <span>Secuencias de Adici√≥n</span>
            </div>
            <div class="demo-content" id="demo-content">
                <p><strong>Contenido de la secci√≥n:</strong></p>
                <ul>
                    <li>Selector de ingredientes (chips)</li>
                    <li>Campo de descripci√≥n</li>
                    <li>Botones de acciones de cocina</li>
                    <li>Campos de duraci√≥n (horas/minutos)</li>
                    <li>Bot√≥n "A√±adir Secuencia"</li>
                    <li>Lista de secuencias existentes</li>
                </ul>
                <p><em>Click en el t√≠tulo arriba para colapsar/expandir</em></p>
            </div>
        </div>

        <script>
            function toggleDemo() {
                const title = document.querySelector('.demo-title');
                const content = document.getElementById('demo-content');
                
                title.classList.toggle('collapsed');
                content.classList.toggle('collapsed');
            }
        </script>

        <h2>üß™ Casos de Prueba</h2>

        <div class="test-case">
            <h3>Test 1: Crear Nueva Receta</h3>
            <div class="steps">
                <strong>Pasos:</strong>
                <ol>
                    <li>Click en "‚ûï Nueva Receta"</li>
                    <li>Observar la secci√≥n "Secuencias de Adici√≥n"</li>
                </ol>
            </div>
            <div class="expected">
                <strong class="success">‚úì Resultado Esperado:</strong>
                <ul>
                    <li>La secci√≥n est√° <strong>desplegada</strong></li>
                    <li>El icono muestra: <strong>‚ñº</strong></li>
                    <li>Se ve todo el contenido: selector, campos, botones</li>
                </ul>
            </div>
        </div>

        <div class="test-case">
            <h3>Test 2: Editar Receta Existente</h3>
            <div class="steps">
                <strong>Pasos:</strong>
                <ol>
                    <li>Abrir una receta existente (click en tarjeta)</li>
                    <li>Click en "‚úèÔ∏è Editar"</li>
                    <li>Observar las tres secciones colapsables</li>
                </ol>
            </div>
            <div class="expected">
                <strong class="success">‚úì Resultado Esperado:</strong>
                <ul>
                    <li>Las tres secciones est√°n <strong>plegadas</strong>:
                        <ul>
                            <li>Ingredientes</li>
                            <li>Secuencias de Adici√≥n</li>
                            <li>Informaci√≥n de Inter√©s</li>
                        </ul>
                    </li>
                    <li>Los iconos muestran: <strong>‚ñ∂</strong> (rotado -90deg)</li>
                    <li>Solo se ven los t√≠tulos</li>
                    <li>Los contenidos est√°n ocultos</li>
                </ul>
            </div>
        </div>

        <div class="test-case">
            <h3>Test 3: Expandir Secci√≥n Plegada</h3>
            <div class="steps">
                <strong>Pasos:</strong>
                <ol>
                    <li>Editar una receta (secci√≥n plegada)</li>
                    <li>Click en el t√≠tulo "Secuencias de Adici√≥n"</li>
                </ol>
            </div>
            <div class="expected">
                <strong class="success">‚úì Resultado Esperado:</strong>
                <ul>
                    <li>La secci√≥n se <strong>despliega</strong> con animaci√≥n suave</li>
                    <li>El icono rota de ‚ñ∂ a ‚ñº</li>
                    <li>El contenido aparece gradualmente (opacity 0 ‚Üí 1)</li>
                    <li>Transici√≥n de 0.3 segundos</li>
                </ul>
            </div>
        </div>

        <div class="test-case">
            <h3>Test 4: Colapsar Secci√≥n Desplegada</h3>
            <div class="steps">
                <strong>Pasos:</strong>
                <ol>
                    <li>Crear nueva receta (secci√≥n desplegada)</li>
                    <li>Click en el t√≠tulo "Secuencias de Adici√≥n"</li>
                </ol>
            </div>
            <div class="expected">
                <strong class="success">‚úì Resultado Esperado:</strong>
                <ul>
                    <li>La secci√≥n se <strong>pliega</strong> con animaci√≥n suave</li>
                    <li>El icono rota de ‚ñº a ‚ñ∂</li>
                    <li>El contenido desaparece gradualmente (opacity 1 ‚Üí 0)</li>
                    <li>Transici√≥n de 0.3 segundos</li>
                </ul>
            </div>
        </div>

        <div class="test-case">
            <h3>Test 5: Interacci√≥n con Hover</h3>
            <div class="steps">
                <strong>Pasos:</strong>
                <ol>
                    <li>Pasar el mouse sobre el t√≠tulo "Secuencias de Adici√≥n"</li>
                </ol>
            </div>
            <div class="expected">
                <strong class="success">‚úì Resultado Esperado:</strong>
                <ul>
                    <li>El cursor cambia a pointer (manita)</li>
                    <li>El color del t√≠tulo cambia a rojo (#FF385C)</li>
                    <li>Indica visualmente que es clickeable</li>
                </ul>
            </div>
        </div>

        <h2>üîß Implementaci√≥n T√©cnica</h2>

        <div class="note">
            <h3>HTML:</h3>
            <pre style="background: #263238; color: #aed581; padding: 15px; border-radius: 4px; overflow-x: auto;">
&lt;h3 class="section-title collapsible-title" id="sequences-section-title"&gt;
    &lt;span class="collapse-icon"&gt;‚ñº&lt;/span&gt; Secuencias de Adici√≥n
&lt;/h3&gt;
&lt;div id="sequences-collapsible-content" class="collapsible-content"&gt;
    &lt;!-- Contenido de la secci√≥n --&gt;
&lt;/div&gt;</pre>

            <h3>CSS:</h3>
            <pre style="background: #263238; color: #aed581; padding: 15px; border-radius: 4px; overflow-x: auto;">
.collapsible-title {
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 8px;
}

.collapse-icon {
    transition: transform 0.3s ease;
}

.collapsible-title.collapsed .collapse-icon {
    transform: rotate(-90deg);
}

.collapsible-content {
    max-height: 5000px;
    transition: max-height 0.3s ease, opacity 0.3s ease;
    opacity: 1;
}

.collapsible-content.collapsed {
    max-height: 0;
    opacity: 0;
}</pre>

            <h3>JavaScript:</h3>
            <pre style="background: #263238; color: #aed581; padding: 15px; border-radius: 4px; overflow-x: auto;">
// En showRecipeForm()
this.setCollapsibleSectionState('sequences', recipeId !== null);

// Funci√≥n para establecer estado
setCollapsibleSectionState(sectionName, collapsed) {
    const title = document.getElementById(`${sectionName}-section-title`);
    const content = document.getElementById(`${sectionName}-collapsible-content`);
    
    if (collapsed) {
        title.classList.add('collapsed');
        content.classList.add('collapsed');
    } else {
        title.classList.remove('collapsed');
        content.classList.remove('collapsed');
    }
}

// Toggle al hacer click
toggleCollapsibleSection(sectionName) {
    const title = document.getElementById(`${sectionName}-section-title`);
    const content = document.getElementById(`${sectionName}-collapsible-content`);
    
    title.classList.toggle('collapsed');
    content.classList.toggle('collapsed');
}</pre>
        </div>

        <h2>üéØ Beneficios</h2>
        <div class="note">
            <ul class="feature-list">
                <li><strong>Mejor UX al editar:</strong> Menos scroll, interfaz m√°s limpia</li>
                <li><strong>Foco en lo importante:</strong> Al editar, el usuario se enfoca en campos principales</li>
                <li><strong>Flexibilidad:</strong> El usuario puede expandir cuando necesite a√±adir secuencias</li>
                <li><strong>Consistencia:</strong> Al crear, todo est√° visible para facilitar el proceso</li>
                <li><strong>Visual claro:</strong> El icono indica claramente el estado</li>
            </ul>
        </div>

        <h2>üìù Comportamiento Detallado</h2>
        <div class="test-case">
            <h3>Estados de las Secciones:</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #f7f7f7;">
                        <th style="padding: 10px; border: 1px solid #ddd;">Acci√≥n</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">Secciones</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">Estado Inicial</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">Icono</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">Crear nueva receta</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">
                            ‚Ä¢ Ingredientes<br>
                            ‚Ä¢ Secuencias de Adici√≥n<br>
                            ‚Ä¢ Informaci√≥n de Inter√©s
                        </td>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Desplegadas</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚ñº</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">Editar receta existente</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">
                            ‚Ä¢ Ingredientes<br>
                            ‚Ä¢ Secuencias de Adici√≥n<br>
                            ‚Ä¢ Informaci√≥n de Inter√©s
                        </td>
                        <td style="padding: 10px; border: 1px solid #ddd;"><strong>Plegadas</strong></td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚ñ∂</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h2>‚úÖ Checklist de Verificaci√≥n</h2>
        <div class="test-case">
            <h3>Para verificar que funciona correctamente:</h3>
            <ol>
                <li>‚òê Crear nueva receta ‚Üí Secci√≥n desplegada</li>
                <li>‚òê Editar receta ‚Üí Secci√≥n plegada</li>
                <li>‚òê Click en t√≠tulo ‚Üí Alterna estado</li>
                <li>‚òê Icono rota correctamente (‚ñº ‚Üî ‚ñ∂)</li>
                <li>‚òê Animaci√≥n suave (0.3s)</li>
                <li>‚òê Hover cambia color a rojo</li>
                <li>‚òê Cursor cambia a pointer</li>
                <li>‚òê Contenido se oculta/muestra completamente</li>
                <li>‚òê No hay saltos visuales</li>
                <li>‚òê Funciona en m√≥vil y desktop</li>
            </ol>
        </div>

        <h2>üöÄ Extensibilidad</h2>
        <div class="note">
            <p><strong>Esta implementaci√≥n es reutilizable para otras secciones:</strong></p>
            <ol>
                <li>A√±adir clases <code>collapsible-title</code> y <code>collapsible-content</code></li>
                <li>A√±adir IDs con patr√≥n: <code>{nombre}-section-title</code> y <code>{nombre}-collapsible-content</code></li>
                <li>Llamar a <code>setupCollapsibleSections()</code> con el nuevo ID</li>
                <li>Usar <code>setCollapsibleSectionState(nombre, collapsed)</code> para controlar el estado inicial</li>
            </ol>
            <p><em>Ejemplo: Se podr√≠a hacer colapsable "Multimedia" o "Informaci√≥n de Inter√©s"</em></p>
        </div>

        <div class="note" style="margin-top: 40px; background: #e8f5e9; border-color: #4CAF50;">
            <strong style="color: #2e7d32;">‚úÖ Estado: IMPLEMENTADO</strong><br>
            Las tres secciones "Ingredientes", "Secuencias de Adici√≥n" e "Informaci√≥n de Inter√©s" 
            ahora son colapsables y se comportan diferente seg√∫n si est√°s creando o editando una receta.
            <br><br>
            <strong>Beneficio:</strong> Al editar, la interfaz es m√°s limpia y enfocada en los campos principales 
            (nombre, categor√≠a, tiempo, m√©todo de preparaci√≥n). El usuario puede expandir las secciones 
            cuando necesite modificarlas.
        </div>
    </div>
</body>
</html>
